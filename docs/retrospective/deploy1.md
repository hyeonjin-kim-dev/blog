# 배포 자동화 여정

내가 개발하는 어플리케이션은 매달 말 일에 배포되고 있다.   
배포는 평균 30분 정도 소요되는데, 절반은 빌드 시간, 절반은 매뉴얼 및 릴리즈 노트 등 문서 작성에 쓰인다.    
어플리케이션이 웹버전과 Windows 앱버전 두가지로 나뉘어, 배포 과정이 긴 편이다.    


배포 과정은 대충 아래와 같다.

1. 매뉴얼 이슈 Merge
1. 버전 업데이트 이슈 Merge
1. 웹 버전 빌드
1. 빌드 결과를 zip 파일로 압축
1. 배포 서버에 배포    
(도커를 쓰지 않고 서버에서 node 로 앱을 바로 실행시키고 있다. 이것 역시 도커로 배포하는 것이 목표...)
1. 도커 이미지 빌드
1. 도커 이미지를 Nexus 레포지토리에 push
1. Windows App 버전 빌드
1. Windows App 아티팩트(*.exe)를 다운로드 사이트에 배포
1. Windows App 아티팩트(*.exe) 를 zip 파일로 압축
1. zip 파일들을 Dooray Wiki 에 업로드
1. 매뉴얼 서버에 매뉴얼 배포 (매뉴얼 아티팩트는 3 에서 생성된다.)
1. Dooray 단톡방에 적용된 이슈들을 종합 정리하여 배포 완료 메신저 전송
1. 릴리즈 노트 이메일 전송

쓰고 보니 아주 길군... -_-;;   
내가 개발하는 앱은 마이크로 서비스여서 여러 서비스에 임베드된다.   
어떤 환경에서 사용될지 모르기 때문에 빌드 산출물과 도커 이미지 파일을 모두 배포한다.   
자체 관리하는 앱도 함께 배포 중이다. 

2,3,4 번은 자바스크립트로 자동화를 해둔 상태이다.   
6, 7 번은 쉘 스크립트로 자동화를 했다.   
12 번은 후임을 시켜 하고 있고,    
13번은 Dooray API 와 GitLab API 를 활용하여 자동화를 했다.    
물론 실행은 수동으로 해야한다. 

지금은 익숙해져서 물 흐르듯이 후다닥 진행할 수 있지만,   
가끔 놓치는 것도 있고, 무엇보다 귀찮다. 

또한, 최근 다녀온 AI 컨퍼런스에서 "딸깍"에 굉장한 영감을 받아서 너무너무 자동화를 하고 싶었다.   
얼마나 자동화를 할 수 있을진 모르겠지만, 최대한 덜 일할 수 있는 것을 목표로 한다. 


## 릴리즈 노트 이메일 자동화

계획은 이렇다. 

1. 배포에 적용되는 이슈 제목들 가져오기
1. 1 번과 함께 지난 버전에서 작성된 릴리즈 노트 content 를 AI 에게 컨텍스트로 제공
1. AI 에게 릴리즈 노트 content 를 markdown 으로 만들 것을 명령
1. AI 결과 markdown 을 메일로 전송




